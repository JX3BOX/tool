(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-364cb691"],{"266c":function(e,t,a){"use strict";a("ccd1")},"36a4":function(e,t,a){"use strict";a.r(t);a("ac1f"),a("841c"),a("498a");var i=function(){var e=this,t=e._self._c;return t("ListLayout",{attrs:{"app-key":"jx3dat","app-name":"数据下载"}},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"m-archive-box"},[t("div",{staticClass:"m-plugins-header"},[t("h1",{staticClass:"m-plugins-title"},[t("i",{class:e._f("showIcon")(e.subtype)}),e._v(" 插件数据 ")])]),t("div",{staticClass:"m-archive-search",attrs:{slot:"search-before"},slot:"search-before"},[t("a",{staticClass:"u-publish el-button el-button--primary",attrs:{href:e.publish_link}},[e._v("+ 发布作品")]),t("el-input",{attrs:{placeholder:"请输入搜索内容",clearable:""},on:{clear:e.onSearch},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch.apply(null,arguments)}},model:{value:e.search,callback:function(t){e.search="string"===typeof t?t.trim():t},expression:"search"}},[t("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("关键词")]),t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.onSearch},slot:"append"})],1)],1),t("div",{staticClass:"m-archive-filter"},[t("clientBy",{attrs:{type:e.client},on:{filter:e.filterImperceptibly}}),t("markBy",{on:{filter:e.filterMeta}}),t("orderBy",{on:{filter:e.filterMeta}})],1),e.data&&e.data.length?t("div",{staticClass:"m-archive-list"},[t("ul",{staticClass:"u-list"},e._l(e.data,(function(a,i){return t("list-item",{key:i+a,attrs:{item:a,order:e.order,type:"jx3dat"}})})),1)]):t("el-alert",{staticClass:"m-archive-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.hasNextPage,expression:"hasNextPage"}],staticClass:"m-archive-more",attrs:{type:"primary",loading:e.loading,icon:"el-icon-arrow-down"},on:{click:e.appendPage}},[e._v("加载更多")]),t("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":e.per,total:e.total,"current-page":e.page},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.changePage}})],1)])},n=[],s=a("ade3"),r=(a("2c3e"),a("d3b7"),a("99af"),a("14d9"),a("b0c0"),a("b64b"),a("caad"),a("2532"),a("44fd")),o=a("85e4"),l=a("29c2"),c=a("5d7e"),u=a("9398"),d={name:"Index",props:[],data:function(){return{loading:!1,data:[],page:1,per:10,total:1,pages:1,number_queries:["per","page"],subtype:"std"==this.$store.state.client?"1":"5",order:"update",mark:"",client:this.$store.state.client,search:"",view:""}},computed:{publish_link:function(){return Object(o["publishLink"])("jx3dat")},hasNextPage:function(){return this.pages>1&&this.page<this.total},query:function(){return{subtype:this.subtype,order:this.order,mark:this.mark,client:this.client}},pg_queries:function(){return{page:this.page,per:this.per}},reset_queries:function(){return[this.subtype]}},methods:{onSearch:function(){1!=this.page?this.page=1:this.loadData()},buildQuery:function(e){e&&(this.page+=1);var t={per:this.per,page:this.page};for(var a in this.query)void 0!==this.query[a]&&""!==this.query[a]&&null!==this.query[a]&&("search"==a?t.search=this.query.search.trim():t[a]=this.query[a]);return t.subtype&&(t.sticky=1),this.search&&(t.search=this.search.trim()),t},loadData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.buildQuery(t);return console.log("[cms-list]","<loading data>",a),a.type="jx3dat",this.loading=!0,Object(l["c"])(a).then((function(a){var i,n,s,r,o,l,c,u;t?e.data=e.data.concat(null===(o=a.data)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.list):e.data=null===(c=a.data)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.list;e.total=null===(i=a.data)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.total,e.pages=null===(s=a.data)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.pages})).finally((function(){e.loading=!1}))},replaceRoute:function(e){return this.$router.push({name:this.$route.name,query:Object.assign({},this.$route.query,e)}).then((function(){window.scrollTo(0,0)})).catch((function(e){}))},filterMeta:function(e){var t;this.replaceRoute((t={},Object(s["a"])(t,e["type"],e["val"]),Object(s["a"])(t,"page",1),t))},filterImperceptibly:function(e){this[e["type"]]=e["val"]},changePage:function(e){this.loadData(),this.replaceRoute({page:e})},appendPage:function(){this.loadData(!0)}},watch:{"$route.query":{deep:!0,immediate:!0,handler:function(e){if(Object.keys(e).length)for(var t in console.log("[cms-list]","<route query change>",e),e)this.number_queries.includes(t)?this[t]=~~e[t]:this[t]=e[t]}},reset_queries:{deep:!0,handler:function(){console.log("[cms-list]","<reset page>"),this.page=1}},query:{deep:!0,immediate:!0,handler:function(e){console.log("[cms-list]","<request query change>",e),this.loadData()}}},filters:{showIcon:function(e){return c["a"][e]},showLabel:function(e){return c["b"][e]}},mounted:function(){},components:{listItem:r["a"],ListLayout:u["a"]}},p=d,h=(a("266c"),a("2877")),g=Object(h["a"])(p,i,n,!1,null,null,null);t["default"]=g.exports},ccd1:function(e,t,a){}}]);
//# sourceMappingURL=chunk-364cb691.fe5d4269.js.map